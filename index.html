<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Harry Copeman</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
  <link rel="stylesheet" href="assets/css/gallery.css">
</head>
<body class="loading">
  <header class="gallery-header">
    <div class="gallery-title-block">
      <h1>HARRY COPEMAN <span class="title-subtitle">is a british software designer in New York</span><span class="title-about-text hidden"> with over a decade of experience working on consumer products. He left college to join Dropbox, and at 18 became Facebook's youngest employee. He then joined Farewill (acquired) as their founding designer, before opening the London office of Bakken & Baeck.<br><br>Today, he's leading design at Cosmos, a platform for creatives to collect and curate inspiration. Before this, he led Artificial Intelligence and Discovery at Shop, and worked on creation tools at Universe.</span></h1>
    </div>
    <div class="gallery-about-section">
      <a href="#" id="about-link" class="about-link"><span id="about-text">About</span></a>
    </div>
    <div class="gallery-contact-section">
      <a href="mailto:harry.copeman@gmail.com" id="contact-link" class="about-link">Contact</a>
    </div>
  </header>
  <main class="gallery-main">
    <div class="carousel-viewport">
      <div class="carousel-track">
        <!-- Slides will be rendered here by JS -->
      </div>
    </div>
    <button class="theme-option" id="light-btn">Light</button>
    <button class="theme-option" id="dark-btn">Dark</button>
  </main>
  
  <div id="about-modal">
    <div id="about-modal-content">
      <div class="about-modal-links">
        <a href="https://linkedin.com/in/harrycopeman" target="_blank" class="about-link-row">
          LinkedIn
          <svg width="8" height="8" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 11L11 1M11 1H1M11 1V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <a href="https://cosmos.so" target="_blank" class="about-link-row">
          Cosmos
          <svg width="8" height="8" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 11L11 1M11 1H1M11 1V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
        <a href="mailto:harry.copeman@gmail.com" class="about-link-row">
          Email
          <svg width="8" height="8" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 11L11 1M11 1H1M11 1V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
  <script>
// Slide data from previous implementation
const slides = [
  {
    type: 'video',
    src: 'assets/vid/cosmos.mov',
    year: '2025',
    jobTitle: 'Design at Cosmos',
    caption: 'Leading design and creative direction for the new Cosmos, coming early 2026',
    alt: 'Cosmos platform video'
  },
  {
    type: 'video',
    src: 'assets/vid/shop-2.mp4',
    year: '2024',
    jobTitle: 'Staff Product Designer at Shop',
    caption: 'Led varying projects including a full redesign, a new homefeed, and AI strategy',
    alt: 'Shop redesign video'
  },
  {
    type: 'image',
    src: 'assets/img/universe-2.png',
    year: '2023',
    jobTitle: 'Staff Product Designer at Universe',
    caption: 'Led a redesign of the editor, winning the 2023 Apple Design Award',
    alt: 'Universe editor redesign'
  },
  {
    type: 'video',
    src: 'assets/vid/ruter-screen.mp4',
    year: '2022',
    jobTitle: 'Ruter via Bakken & Bæck',
    caption: 'Led a redesign for Norways public transportation company',
    alt: 'Ruter redesign video'
  },
  {
    type: 'image',
    src: 'assets/img/bb-office.jpeg',
    year: '2020',
    jobTitle: 'London for Bakken & Bæck',
    caption: 'Founded the London office, hiring a team of 15',
    alt: 'Bakken & Bæck London office'
  },
  {
    type: 'image',
    src: 'assets/img/kron-2.png',
    year: '2019',
    jobTitle: 'Kron via Bakken & Bæck',
    caption: 'Designed Norways #1 finance app',
    alt: 'Kron finance app design'
  },
  {
    type: 'image',
    src: 'assets/img/farewill.png',
    year: '2017',
    jobTitle: 'Founding Designer at Farewill',
    caption: 'Designed Farewill (acquired), raising over £1.25B for charity',
    alt: 'Farewill founding designer'
  },
  {
    type: 'image',
    src: 'assets/img/insta2.png',
    year: '2016',
    jobTitle: 'Product Designer at Facebook',
    caption: 'Designed product tagging across Facebook and Instagram',
    alt: 'Instagram product tagging'
  },
  {
    type: 'image',
    src: 'assets/img/devices.png',
    year: '2015',
    jobTitle: 'Product Designer at Facebook',
    caption: 'Part of the small team that launched Facebook design resources',
    alt: 'Facebook design resources'
  },
  {
    type: 'image',
    src: 'assets/img/mailbox.png',
    year: '2014',
    jobTitle: 'Product Designer at Dropbox',
    caption: 'Design and prototypes for Mailbox',
    alt: 'Mailbox design and prototypes'
  }
];

let current = 0;

function renderSlides() {
  const track = document.querySelector('.carousel-track');
  track.innerHTML = '';
  
  // Add all slides in order
  slides.forEach((slide, idx) => {
    const slideDiv = createSlideElement(slide, idx);
    track.appendChild(slideDiv);
  });
}

function createSlideElement(slide, idx) {
  const slideDiv = document.createElement('div');
  slideDiv.className = 'carousel-slide';
  slideDiv.setAttribute('data-index', idx);
  
  // Add manual positioning classes for slides (only on desktop)
  if (idx > 0 && window.innerWidth > 768) {
    slideDiv.classList.add(`slide-${idx}`);
  }
  
  // Create media container
  const mediaContainer = document.createElement('div');
  mediaContainer.className = 'media-container';
  
  // Create media element
  let el;
  if (slide.type === 'image') {
    el = document.createElement('img');
    el.src = slide.src;
    el.alt = slide.alt;
  } else if (slide.type === 'video') {
    el = document.createElement('video');
    el.src = slide.src;
    el.autoplay = true;
    el.muted = true;
    el.loop = true;
    el.playsInline = true;
    el.setAttribute('aria-label', slide.alt);
  }
  mediaContainer.appendChild(el);
  slideDiv.appendChild(mediaContainer);
  
  // Create caption element
  const captionDiv = document.createElement('div');
  captionDiv.className = 'slide-caption';
  
  const yearSpan = document.createElement('span');
  yearSpan.className = 'gallery-year';
  yearSpan.textContent = slide.year;
  
  const jobTitleSpan = document.createElement('span');
  jobTitleSpan.className = 'gallery-job-title';
  jobTitleSpan.textContent = slide.jobTitle;
  
  const descSpan = document.createElement('span');
  descSpan.className = 'gallery-desc';
  descSpan.textContent = slide.caption;
  
  captionDiv.appendChild(yearSpan);
  captionDiv.appendChild(jobTitleSpan);
  captionDiv.appendChild(descSpan);
  slideDiv.appendChild(captionDiv);
  
  return slideDiv;
}

function updateCurrentSlide() {
  const viewport = document.querySelector('.carousel-viewport');
  const slidesEls = Array.from(document.querySelectorAll('.carousel-slide'));
  const viewportHeight = viewport.clientHeight;
  const scrollTop = viewport.scrollTop;
  
  let closestSlide = 0;
  let closestDistance = Infinity;
  
  slidesEls.forEach((slide, idx) => {
    const slideTop = slide.offsetTop;
    const slideHeight = slide.offsetHeight;
    const slideCenter = slideTop + slideHeight / 2;
    const viewportCenter = scrollTop + viewportHeight / 2;
    
    const distance = Math.abs(slideCenter - viewportCenter);
    
    if (distance < closestDistance) {
      closestDistance = distance;
      closestSlide = idx;
    }
  });
  
  if (closestSlide !== current) {
    current = closestSlide;
  }
  
  // Hide subtitle when scrolling past first slide (but not if about modal is open)
  // Always hide subtitle on mobile devices
  const subtitle = document.querySelector('.title-subtitle');
  const modal = document.getElementById('about-modal');
  if (subtitle) {
    if (window.innerWidth <= 600 || (closestSlide > 0 && !modal.classList.contains('open'))) {
      subtitle.classList.add('hidden');
    } else {
      subtitle.classList.remove('hidden');
    }
  }
}



function scrollToSlide(idx) {
  const viewport = document.querySelector('.carousel-viewport');
  const slidesEls = Array.from(document.querySelectorAll('.carousel-slide'));
  const slide = slidesEls[idx];
  if (!slide) return;
  
  const slideTop = slide.offsetTop;
  const viewportHeight = viewport.clientHeight;
  const slideHeight = slide.offsetHeight;
  const targetScroll = slideTop - (viewportHeight - slideHeight) / 2;
  
  viewport.scrollTo({
    top: targetScroll,
    behavior: 'smooth'
  });
}

// Keyboard navigation
window.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowUp') {
    if (current > 0) {
      scrollToSlide(current - 1);
    }
  } else if (e.key === 'ArrowDown') {
    if (current < slides.length - 1) {
      scrollToSlide(current + 1);
    }
  }
});

// Initial render
renderSlides();

function ensureCenteredAfterMediaLoad() {
  const slidesEls = Array.from(document.querySelectorAll('.carousel-slide'));
  let pending = 0;
  slidesEls.forEach(slideDiv => {
    const media = slideDiv.querySelector('img, video');
    if (media) {
      if (media.complete || media.readyState === 4) {
        // Already loaded
      } else {
        pending++;
        media.addEventListener('load', () => {
          pending--;
          if (pending === 0) {
            updateCurrentSlide();
            document.body.classList.remove('loading');
          }
        });
        media.addEventListener('loadeddata', () => {
          pending--;
          if (pending === 0) {
            updateCurrentSlide();
            document.body.classList.remove('loading');
          }
        });
      }
    }
  });
  // Fallback: always call after a short delay
  setTimeout(() => {
    updateCurrentSlide();
    document.body.classList.remove('loading');
  }, 100);
}

// Add scroll event listener
const viewport = document.querySelector('.carousel-viewport');
viewport.addEventListener('scroll', updateCurrentSlide);
window.addEventListener('resize', () => updateCurrentSlide());

// Forward scroll events from header to carousel viewport
const header = document.querySelector('.gallery-header');
header.addEventListener('wheel', function(e) {
  e.preventDefault();
  const delta = e.deltaY;
  viewport.scrollTop += delta;
});

ensureCenteredAfterMediaLoad();


// Theme toggle functionality
const lightBtn = document.getElementById('light-btn');
const darkBtn = document.getElementById('dark-btn');
const body = document.body;

// Check for saved theme preference or default to light mode
const currentTheme = localStorage.getItem('theme') || 'light';
body.classList.toggle('dark', currentTheme === 'dark');
updateThemeButtons();

function updateThemeButtons() {
  if (body.classList.contains('dark')) {
    lightBtn.classList.remove('active');
    lightBtn.classList.add('inactive');
    darkBtn.classList.remove('inactive');
    darkBtn.classList.add('active');
  } else {
    lightBtn.classList.remove('inactive');
    lightBtn.classList.add('active');
    darkBtn.classList.remove('active');
    darkBtn.classList.add('inactive');
  }
}

lightBtn.addEventListener('click', function() {
  body.classList.remove('dark');
  localStorage.setItem('theme', 'light');
  updateThemeButtons();
});

darkBtn.addEventListener('click', function() {
  body.classList.add('dark');
  localStorage.setItem('theme', 'dark');
  updateThemeButtons();
});

document.getElementById('about-link').addEventListener('click', function(e) {
  e.preventDefault();
  var modal = document.getElementById('about-modal');
  var aboutText = document.getElementById('about-text');
  var titleAboutText = document.querySelector('.title-about-text');
  var titleSubtitle = document.querySelector('.title-subtitle');
  
  if (modal.classList.contains('open')) {
    // Modal is open, close it
    modal.classList.remove('open');
    setTimeout(function() { modal.style.display = 'none'; }, 350);
    titleAboutText.classList.remove('visible');
    titleSubtitle.classList.remove('visible');
    aboutText.textContent = 'About';
    
    // Check scroll position and hide subtitle if needed
    setTimeout(function() {
      updateCurrentSlide();
    }, 50);
  } else {
    // Modal is closed, open it
    modal.style.display = 'flex';
    // Force reflow for transition
    void modal.offsetWidth;
    modal.classList.add('open');
    titleAboutText.classList.add('visible');
    
    // Show subtitle on both desktop and mobile when about is opened
    titleSubtitle.classList.remove('hidden');
    titleSubtitle.classList.add('visible');
    
    // Ensure subtitle stays visible even if scroll detection runs
    setTimeout(function() {
      titleSubtitle.classList.remove('hidden');
      titleSubtitle.classList.add('visible');
    }, 100);
    
    aboutText.textContent = 'Close';
  }
});
document.getElementById('about-modal').addEventListener('click', function(e) {
  if (e.target === this) {
    this.classList.remove('open');
    var modal = this;
    var aboutText = document.getElementById('about-text');
    var titleAboutText = document.querySelector('.title-about-text');
    var titleSubtitle = document.querySelector('.title-subtitle');
    setTimeout(function() { modal.style.display = 'none'; }, 350);
    titleAboutText.classList.remove('visible');
    titleSubtitle.classList.remove('visible');
    aboutText.textContent = 'About';
    
    // Check scroll position and hide subtitle if needed
    setTimeout(function() {
      updateCurrentSlide();
    }, 50);
  }
});
document.getElementById('about-modal-content').addEventListener('click', function(e) {
  e.stopPropagation();
});
window.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    var modal = document.getElementById('about-modal');
    var aboutText = document.getElementById('about-text');
    var titleAboutText = document.querySelector('.title-about-text');
    var titleSubtitle = document.querySelector('.title-subtitle');
    if (modal.classList.contains('open')) {
      modal.classList.remove('open');
      setTimeout(function() { modal.style.display = 'none'; }, 350);
      titleAboutText.classList.remove('visible');
      titleSubtitle.classList.remove('visible');
      aboutText.textContent = 'About';
      
      // Check scroll position and hide subtitle if needed
      setTimeout(function() {
        updateCurrentSlide();
      }, 50);
    }
  }
});

  </script>
  <script defer src="https://speed.vercel.dev/script.js" data-sid="prj_CnWVMuvO3knVoWH1hGXuk91v16EP"></script>
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script>
    window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
</body>
</html>
